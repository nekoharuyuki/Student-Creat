<HTML>
<HEAD>
<TITLE>平成12年度秋期試験　(問11～問14)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" topmargin="0" leftmargin="0">
<blockquote>
<hr>
<H3 align="center">平成12年度秋期試験　正解例と解説(問11～問14)</H3>
<HR WIDTH=100%>  
<a NAME="110">　<BR> 
<b> 
問11</b></a>　　
<hr>
<a NAME="111">　<BR>
<b>
設問</a>1　</b>
<p>＜解答＞　イ</p>
<p>＜解説＞行番号32のmogura ( "open" , ix, iy )は座標（ix, iy）にモグラの絵を表示する処理である。この処理を含む行番号25から34までのforループのなかの行番号26のif文の条件 "gcnt % MGNCNT ==0 " が、モグラを出現させる条件となっている。この条件は、gcntをMGNCNTで割り算した余りが0となるという条件である。gcntは0から2999まで1ずつインクリメントするので、これをMGCNTの値200で割り算したとき余りが0となるのは、gcntが<br>    
　0, 200, 400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000, 2200, 2400, 2600,2800となる場合である。つまりゲーム終了までモグラは最大15回出現する。<br>    
</p>    
<HR WIDTH=100%>    
<a HREF="12f_p_e4.htm#111">問題へ</a>    
<HR WIDTH=100%>    
<a NAME="112">   
<b>   
設問</b></a><b><a NAME="111">2</a>　</b> 
<p>＜解答＞　ア、ウ</p> 
<p>＜解説＞アは正しくない。アルゴリズムの概要より、MGNCNTはモグラの絵をどれぐらいの間隔で出現させるかを決める値、つまり出現間隔を指定するもので、この値を変えても得点には直接影響しない。<br> 
<br> 
イは正しい。アルゴリズムの概要より、DSPCNTの値はモグラが表示されてから消失するまでのモグラの表示時間を指定するもので、消失するまでの表示時間が長くなれば、マウスクリックできるチャンスが増えるので、DSPCNTの値の増減は、得点に影響する。<br> 
<br> 
ウは正しくない。表示回数を増減してもモグラの出現する間隔が増減するだけで、モグラが表示されてから消失するまでの時間は、変化しない。表示されてから消失するまでの時間は、DSPCNTの増減により変化する。<br> 
<br> 
エは正しい。行番号52のmogura ( "close" , ix, iy )は座標（ix, iy）のモグラの絵を閉じる処理である。この処理を含む行番号46から55までのforループのなかの行番号49のif文の条件 "gcnt－mg[ix][iy].st＞DSPCNT " が、マウスクリックされずに表示されているモグラの絵を閉じる条件となっている。この条件が成り立つのは、現在のタイマカウントgcntからそのモグラが出現したときのタイマカウントを差し引いた値が、消失するまでの表示時間DSPCNTより大きくなったときである。モグラが最後に出現するのはgcnt＝2800のときで、この2800がmg[ix][iy].stに保存される。DSPCNT＝250なので、モグラが最後に出現して以後、if文の条件は "gcnt－2800＞250 "となる。最後にgcnt＝3000で終了するので、終了時点でこの条件は満たされず、モグラの絵が表示された状態で終了する。<br>    
<br>    
オは正しい。行番号37～38の条件 " mg[gx / BLKSZ][gy / BLKSZ].flg == ON &amp;&amp; hitck[gx % BLKSZ][gy % BLKSZ] == HIT " は、クリックのあった座標（gx，gy）を含む升目にモグラの絵が表示されていて、かつ（gx，gy）が認識領域上である<br>    
という条件である。この条件が成り立つ場合は、行番号39のhitpt += 10により10ポイント得点が加算される。この条件が成り立たない場合、行番号44のhitpt--により1ポイント得点が減算される。つまりクリックのあった座標（gx，gy）を含む升目にモグラの絵が表示されていないか、または（gx，gy）が認識領域以外であった場合、1ポイント得点が減算される。</p>    
<p>　</p>   
<HR WIDTH=100%>   
<a HREF="12f_p_e4.htm#112">問題へ</a>   
<HR WIDTH=100%>   
<a NAME="113">   
<b>   
設問</b></a><b><a NAME="111">3</a></b>   
<p>＜解答＞　オ</p> 
<p>＜解説＞<b>　</b>見逃したモグラというのは、表示されている間にクリックされずに閉じたモグラである。表示中にクリックできなかったモグラは、表示時間DSPCNTを超過すれば行番号52の処理により閉じる。したがってクリックされずに消失時点まで表示されているモグラを、行番号52の処理で閉じる時点でカウントすればよい。したがって解答群のオの「行番号52の直後に scnt++; を追加する」が正しい。<br>    
<br>    
　</p> 
<HR WIDTH=100%> 
<a HREF="12f_p_e4.htm#113">問題へ</a> 
<HR WIDTH=100%> 
<a NAME="114"> 
<b> 
設問</b></a><b><a NAME="111">4</a>　</b> 
<p>＜解答＞　ア</p> 
<p>＜解説＞モグラの絵は縦および横が24画素の画像である。BLKSZ＝24なので、変更前のクリック認識画素領域は、行番号24の処理により縦横24画素の領域である。<br> 
これに対して、TSZ＝BLKSZ/3＝24/3＝8なので、変更後のix、iyの変域は</p> 
<p>ix＜TSZ、iy＜TSZ－ixつまりix＜8、iy＜8－ix</p> 
<p>となる。このix、iyの変域に対して</p> 
<table border="0" cellpadding="3" cellspacing="0"> 
  <tr> 
    <td>①hitck[ix][iy]=OFF　　　　　　&nbsp;<br> 
      　　ix　　　　iy　　　　　　 　　　　<br> 
      　　0　　　0～7　　　　　　 　&nbsp;<br> 
      　　1　　　0～6　　　　　　　　 　&nbsp;<br> 
      　　　…　　　　　　　　　　　 　　&nbsp;<br> 
      　　7　　　0　</td> 
  </tr> 
  <tr> 
    <td> ②hitck[ix][BLKSZ－iy－1]=OFF<br> 
      　　ix 　　　BLKSZ－iy－1<br> 
      　　0 　　　23～16<br> 
      　　1 　　　23～17<br> 
      　　　…<br> 
      　　7　　　       23</td>    
  </tr>    
  <tr>    
    <td>③hitck[BLKSZ－ix－1][iy]=OFF&nbsp;<br>   
      　　BLKSZ－ix－1 　　　iy<br> 
      　　23　　　　　　　　　　0～7<br> 
      　　22　　　　　　　　　　0～6<br> 
      　　　　　　…　　　　　　<br> 
      　　16　　　　　　　　　　0</td> 
  </tr> 
  <tr> 
    <td>④hitck[BLKSZ－ix－1] [BLKSZ－iy－1]=OFF<br>    
      　　BLKSZ－ix－1　　　　BLKSZ－iy－1<br> 
      　　23 　　　　　　　　　　　23～16<br> 
      　　22 　　　　　　　　　　　23～17<br> 
      　　　　　　　　…<br> 
      　　16 　　　　　　　　　　　23</td> 
  </tr> 
</table> 
<p>したがって解答群のアが正しい。<br> 
</p> 
<p><br> 
　</p> 
<HR WIDTH=100%> 
<a HREF="12f_p_e4.htm#114">問題へ</a> 
<HR WIDTH=100%> 
<p><A HREF="index.htm">メニューへ戻る</A>　</p> 
<HR WIDTH=100%> 
<a NAME="120">　<BR> 
<b> 
問12</b></a>　　
<HR WIDTH=100%> 
<b> 
<a NAME="121">　<BR> 
設問</a></b>
<p>＜解答＞a　ウ　　　b　ア　　　c　イ　　　d　ア　　　e　ア</p>
<p>＜解説＞変更前のプログラムでは、利用者番号、ログイン日、ログイン時刻の昇順に整列されたファイルを順に読み、コントロールブレークにより利用者番号ごとの利用回数を集計し、利用回数ファイルに出力している。プログラムの変更により、1ヶ月間の異なる日付の利用日数も集計し、利用回数とともに利用日数も利用回数ファイルに出力する。したがって変更のポイントは、</p>
<table border="0" cellpadding="3" cellspacing="0">
  <tr>
    <td valign="top">①</td>
    <td>変更後は異なる日付について利用日数を集計するので、ログイン日が変わるときにログイン日数をカウントアップすればよい。</td>
  </tr>
  <tr>
    <td valign="top">②</td>
    <td>ログファイルに各利用者の1ヶ月分のログが記録されているので、各利用者の1ヶ月間の利用日数の出力タイミングは、利用者番号が変わったとき行う。</td>
  </tr>
</table>
<p>空欄aについて<br>
行番号22の処理は、ログファイルの1件目のレコードを読み込んだ直後に、レコードキーの利用者番号を保存エリアUSER-NOに保存している処理である。変更後は、利用者番号またはログイン日が変わるごとにコントロールブレークにより、グループ集計を行うので、ログイン日も保存エリアWORK-DAYに保存しておく必要がある。したがって解答群のウ、MOVE LOG-DAY TO WORK-DAYが正解。<br>   
<br>   
空欄bについて<br>   
空欄bはIF文の条件で、このIF文は行番号28のIF文で利用者番号が同じである場合に実行される。空欄bの条件が成り立つ場合にログイン日が保存エリアWORK-DAYに保存されている。つまりこれはログイン日が変わった場合の処理であり、空欄bの条件は解答群のア、LOG-DAY NOT ＝ WORK-DAYが正解。<br>   
<br>   
空欄cについて<br>   
空欄cは上記の空欄bの条件が成り立つ場合、つまりこれはログイン日が変わった場合の処理の1つである。この場合<br>   
①ログイン日を保存エリアに保存する②利用日数を＋1だけカウントアップする<br>   
②の処理がなく、この空欄cで行う必要がある。したがって解答群のイ、COMPUTE WORK-DAY-COUNT ＝ WORK-DAY-COUNT ＋ 1が正解。<br>   
<br>   
空欄d、空欄eについて<br>   
利用者番号が変わったとき各利用者の1ヶ月間の利用日数の出力を行う必要があるが、利用日数については初期値が0で、ログイン日が変わったときに＋1加算されるため、1だけ少なくなる。したがって空欄dで＋1加算して、USER-DAY-COUNTにセットし出力する必要がある。ファイルの終了時の空欄eも同様で、COMPUTE USER-DAY-COUNT ＝ WORK-DAY-COUNT ＋ 1が正解。<br>   
</p>   
<HR WIDTH=100%>   
<a HREF="12f_p_e4.htm#121">問題へ</a>   
<HR WIDTH=100%>   
<p>   
<A HREF="index.htm">メニューへ戻る</A></p>   
<HR WIDTH=100%>   
<p>   
<a NAME="130">   
<b>問13</b></a><b>　</b>　（解説は省略します。）</p>
<HR WIDTH=100%> 
<a NAME="131">　<BR> 
<b> 
設問</b></a><b>1</b>　
<p>＜解答＞　ウ</p>
<p>　</p>
<HR WIDTH=100%>
<a HREF="12f_p_e4.htm#131">問題へ</a>
<HR WIDTH=100%>
　<BR>
<a NAME="132"> 
<b> 
設問</b></a><b>2</b> 
<p>＜解答＞　ア<br>
　</p>
<HR WIDTH=100%>
<a HREF="12f_p_e4.htm#132">問題へ</a>
<hr>
<a NAME="133"> 
<b> 
設問</b></a><b>3</b>　 
<p>＜解答＞　エ</p>
<p>　</p>
<HR WIDTH=100%>
<a HREF="12f_p_e4.htm#133">問題へ</a>
<hr>
<a NAME="134"> 
<b> 
設問</b></a><b>4</b>　 
<p>＜解答＞　ウ<br>
</p>
<HR WIDTH=100%>
<a HREF="12f_p_e4.htm#134">問題へ</a>
<hr>
<p> 
<A HREF="index.htm">メニューへ戻る</A></p> 
<hr>
<p>
<b><a name="140">問14</a>　</b>　（解説は省略します。）</p>
<hr> 
<p><b><a name="141">設問</a>1　</b></p> 
<p>＜解答＞　a　エ　　b　ク　　c　ク<br>
</p> 
<HR WIDTH=100%> 
<a HREF="12f_p_e4.htm#141">問題へ</a> 
<HR WIDTH=100%> 
<p><b><a name="142">設問</a>2　</b></p> 
<p>＜解答＞　イ<br>
　</p>
<HR WIDTH=100%> 
<a HREF="12f_p_e4.htm#142">問題へ</a> 
<HR WIDTH=100%> 
<p><b><a name="143">設問</a>3</b></p> 
<p>＜解答＞　カ<br>
　</p>
<HR WIDTH=100%> 
<a HREF="12f_p_e4.htm#143">問題へ</a> 
<hr> 
<p> 
<A HREF="index.htm">メニューへ戻る</A></p> 
<HR WIDTH=100%> 
<p><BR> 
</p> 
  <p>　</p>
</blockquote>
</BODY> 
</HTML> 
