<HTML>
<HEAD>
<TITLE>平成11年度春期試験　問題(問3～問6)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" topmargin="0" leftmargin="0">
<blockquote>
  <hr>
  <H3 align="center">平成11年度春期試験　正解例と解説(問7～問10)</H3>
<hr>
<P>
<a NAME="70">
<b>
問7</b></a><b>　</b>
<hr> 
<a NAME="71">　<BR>
<b>
設問</b></a><b>　</b>
  <p>＜解答＞ａ　イ　　　　ｂ　ク　　　　ｃ　イ　　　　ｄ　カ</p>
  <p>＜解説＞<br>
  空欄aについて<br>
 空欄ａを含むif文の条件*cptr='／'は、パス名の文字配列へのポインタcptrがポイントする文字がパスの区切り文字'／'であるか否かを表している。空欄ａは、これが区切り文字'／'である場合の処理の１つに該当する。空欄ａの解答群におけるname_tbl[idx]は、パス名の文字配列の'／'で区切られた各階層のサブディレクトリ名を取り出して格納する領域をポイントするポインタ配列（最大32階層）である。<br>
  このポインタ配列name_tbl[idx]にセットすべきポインタは、パス名の文字配列へのポインタcptrがポイントする'／'の直後の文字へのポインタcptr＋1をセットすればよい。つまり解答群イのname_tbl[idx]=cptr＋1が正解。<br>
  <br>
  空欄bについて<br>
  　空欄ｂは、if文においてstrcmp(fptr->name,name_tbl[idx])=0とAND条件（&amp;&amp;）を構成している。fptrはファイルテーブルへのポインタで、fptr->nameはファイルテーブルの名前nameへのポインタを表し、ファイルテーブルに格納されているファイル名やディレクトリ名をポイントしている。したがってstrcmp文は、ファイルテーブルに格納されているファイル名またはディレクトリ名が、name_tbl[i idx]のポイントするディレクトリ名またはファイル名に一致するか文字列比較をしていいる。ファイルテーブルにおいて検索する対象は、ディレクトリ名、ファイル名のいずれかであり、ファイルテーブルのタイプfptr->typeが'X'（未使用）である場合はスキップすればよい。したがってこのAND条件においてペアとなるべき条件はfptr->type!='X'であり、解答群のクが正解。<br>     
  <img border="0" src="image/A99s07f1.gif" width="727" height="405"><br>    
  <br>    
  空欄ｃについて<br>    
  　空欄ｃは、name_tbl[idx]のポイントするディレクトリ名またはファイル名を、ファイルテーブルで検索する処理において一致するデータが存在し、それがfptr->typeが'D'、つまりディレクトリ名であった場合の処理の１つに相当する。この場合は、そのディレクトリ内を検索してさらに下の階層のディレクトリ名またはファイル名をファイルテーブルで検索するため、子のディレクトリのファイルテーブルへのポインタfptr->nextをfptrにセットし検索ループを繰返せばよい。したがってfptr=fptr->next、解答群のイが正解。<br>
  <br>
  空欄ｄについて<br>
  　空欄ｄは、switch文によりファイルテーブルを検索した結果に応じて、ファイルまたはディレクトリを一覧表示するする処理の中の１つに相当する。ファイルテーブルで一致したものが、ディレクトリであった場合には、ファイルテーブルよりそのディレクトリの内容をすべて読み出して表示すればよい。空欄ｄは、while文によるこの表示ループにおける繰り返し条件に該当する。つまりファイルタイプが'E'でない間は繰り返せばよい。したがってfptr->type!='E'、解答群のカが正解。</p>
  <p><br>
  　</p>
<HR WIDTH=100%> 
  <a HREF="11s_p_e3.htm#71">問題へ</a> 
<HR WIDTH=100%> 
<p><A HREF="index.htm">メニューへ戻る</A>　</p> 
<HR WIDTH=100%> 
<a NAME="80">　<BR> 
<b> 
問8</b></a>　
<HR WIDTH=100%> 
<a NAME="81"><b>　<BR> 
設問</b></a><b>　</b>
  <p>＜解答＞ａ　ア　　　ｂ　オ　　　ｃ　ウ　　　ｄ　エ</p>
  <p>＜解説＞プログラムは、指定された月について商品売上記録ファイルuriage-kirokuを読んで支店別に売上金額を集計し、月別売上目標ファイルの目標金額との比較リストを印刷する処理である。このプログラムでは、支店コードの昇順に整列された商品売上記録ファイルuriage-kirokuのレコードを先頭から順に読んで、コントロール・ブレークにより支店別に売上金額の集計を行っている。</p>
  <p>　空欄ａは、商品売上記録ファイルの１件目のレコードを読み込んだ直後のif文の条件に該当する。この空欄ａの条件が成立した場合に、続く２つのmove命令により支店コードuk-siten-codeが支店コードの保存エリアwk-siten-codeに保存され、１件目の売上金額が集計エリアwk-kingakuに初期値としてセットされている。この条件は、売上記録ファイルが最初からat endではなく、少なくとも１件のレコードが存在する場合に相当する。at endの場合、uk-eofはtrueにセットされるので、空欄ａの条件はnot uk-eofである必要がある。したがって解答群のアが正解。</p>     
  <p>　２つ目のperform yomu命令により２件目以降のレコードを読込んだ直後のif文において、空欄ｂは商品売上記録ファイルがat endでない場合の処理中のif文の条件に該当する。この空欄ｂの条件が成立する場合に、compute命令により金額uk-kingakuの集計エリアwk-kingakuへの集計処理が行われている。これは商品売上記録ファイルの支店コードuk-siten-codeが、wk-siten-codeに保存されている支店コードと一致するする場合、つまり同一支店のレコードである場合の集計処理である。つまり空欄ｂの条件は解答群のオのuk-siten-code=wk-siten-codeが正解。</p>     
  <p>　空欄ｃ直後のperform文の終了条件はloop-exitで、loop-exitとなるまで繰り返される。これに対する初期設定として、ループを繰り返すための条件として、loopをtrueに設定する処理がperform文の手前に必要である。つまり空欄ｃは、loopの初期設定に該当する。したがって解答群のウのset loop to trueが正解。</p>     
  <p>　空欄ｄは、uk-siten-code≠wk-siten-codeとなった場合か売上記録ファイルがeofとなった場合に行われるprint処理の中における処理の１つである。空欄ｄはcompute文で目標達成率pr-tasseiを算出する処理の１部に相当する。月別売上目標ファイルの該当月の目標金額um-kingaku(tuki)が、２つ前のmove命令でwk-mokuhyouにセットされているので、支店別に合計された売上金額wk-kingakuをwk-mokuhyouで割れば、目標達成率が算出される。したがって解答群のエのwk-kingaku * 100 / wk-mokuhyouが正解。<br>     
  　</p>
<HR WIDTH=100%> 
  <a HREF="11s_p_e3.htm#81">問題へ</a> 
<HR WIDTH=100%> 
<A HREF="index.htm"><br> 
メニューへ戻る<br> 
</A> 
<HR WIDTH=100%> 
<p> 
<a NAME="90"> 
<b>問9</b></a><b>　</b></p> 
<HR WIDTH=100%> 
<a NAME="91">　<BR> 
<b> 
設問</b></a>&nbsp; 
<p> 
＜解答＞　ａ　カ　　　　ｂ　ウ　　　　ｃ　オ　　　　ｄ　エ</p> 
<p> 
＜解説＞空欄ａ、ｂ、ｃは、関数hantei(N,q,S)の中の処理の一部に該当する。関数hantei(N,q,S)では、縦、横、対角線についてそれぞれの数の和を計算し、それがSと一致しているかどうかを判定している。N通りの縦の和、N通りの横の和、２通りの対角線の和のすべてが     
Sと一致した場合にこの方陣は魔方陣であると判定し、値１を返す。それ以外の場合には、値０を返す。<br>    
<br>    
　行33～37におけるdoループ中のsum3=sum3＋q(i,j)により、２次元配列qのi行目の要素q(i,1)～q(i,n)の和がsum3に集計される。つまりsum3は魔法陣の横の和をとるための変数であることが分かる。さらに行31～42のdoループの制御変数iにより１行目からN行目までN通りの横の和について、行38のif文の条件sum3/=SによりSと一致するか否かが判定されている。したがって空欄ａを含む行36の変数sum4には、２次元配列qのj列目の要素q(1,j)～q(n,j)の和が集計されると考えられる。つまり変数sum4は、魔法陣の縦の和をとるための変数であることが分かる。空欄ａは、解答群カのq(j,i)が正解。<br>
<br>
　変数sum3、sum4がそれぞれ横の和、縦の和について制御変数iによりN通り判定されているのに対し、行31から42のdoループを終了した直後、行43のif文によりsum1およびsum2がSに一致するか否かが１度だけ判定されている。したがって変数sum1、sum2は、魔法陣の対角線についてのそれぞれの和をとるための変数である。魔法陣の対角線についての和には以下の２つがある。</p> 
<p> 
　①q(1,1),q(2,2),q(3,3),・・・,q(N,N)の和<br>
　②q(1,N),q(2,N-1),q(3,N-2),・・・,q(N,1)の和</p> 
<p> 
①の和は、制御変数iに関する1からNまでのq(i,i)の和として求まるので、空欄ｂを含む39行目はsum1=sum1＋q(i,i)とすればよい。したがって空欄ｂは、解答群のウのq(i,i)に該当する。もう１つの対角線についての和②が、42行目sum2=sum2＋q(i,j)の処理に相当し、空欄ｃはこの制御変数jの設定値を求めている。②の配列要素の添字の変化より、j=N－(i－1)=N＋1－iとすればよいことが分かる。したがって空欄ｃは、解答群のオのj=N＋1－iが正解。<br>
<br>
　　　　　　<br>
　行50から52は、配列pの最初のi個を逆順に入れ替える処理ループである。空欄ｄを含む行51の処理は、２つの要素を交換する処理に相当する。空欄ｄは、配列要素p(k)の交換相手の配列要素である。p(1)とp(i),p(2)とp(i－1),・・・,p(i/2)とp(i/2＋1)のように交換すればよいので、p(k)の交換相手の配列要素はp(i＋1－k)である。したがって空欄ｄは解答群のエに該当する。<br>
　</p> 
<HR WIDTH=100%>
  <a HREF="11s_p_e3.htm#91">問題へ</a>
<HR WIDTH=100%>
  　<BR>
<b><a name="100">問10</a>　</b>（解説は省略します。）
<hr>
<p><b><a name="101">設問</a></b></p>
<p>＜解答＞　ａ　カ　　　　ｂ　カ　　　　ｃ　イ　　　　ｄ　エ<b><br>
</b><br>
　</p>
<HR WIDTH=100%>
  <a HREF="11s_p_e3.htm#101">問題へ</a>
<HR WIDTH=100%>
  　<BR>
<A HREF="index.htm">メニューへ戻る</A>
<HR WIDTH=100%>
<p><BR>
</p>
  <p>　</p>
</blockquote>
</BODY>
</HTML>
