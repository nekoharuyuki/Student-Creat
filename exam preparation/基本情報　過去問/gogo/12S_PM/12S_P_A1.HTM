<HTML>
<HEAD>
<TITLE>平成12年度春期試験　(問1～2)</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" topmargin="0" leftmargin="0">
<blockquote>
<hr>
<H3 align="center">平成年12度春期試験　正解例と解説(問1～問2)</H3>
<basefont size="3">
<hr>
<p><a NAME="10"><b>問1</b></a></p>
<HR WIDTH=100%>
<A NAME="11">
<b>
設問1</b></a><b>　</b>
<p>＜解答＞　a　イ　　　b　コ</p>
<p>＜解説＞　検索条件がIrank＝0、Iusrn＝4であるから、<br>
　　①「部屋の状況status(n)が空き」<br>
　　②「部屋の最大利用可能人数umaxn(n)≧4」<br>
　の２つを同時に満たすデータが検索される。<br>
<img border="0" src="image/A12s01f1.gif" width="589" height="150"></p>
<p>　該当データが見つかるごとにOrmをカウントアップして、部屋番号no(n)を<br>
Ormno(Orm)に格納する。したがって上図のように部屋番号101と301のデータが条件を満たし、Orm＝2、Ormno(2)＝301となる。</p>


<HR WIDTH=100%>

<A HREF="12s_p_e1.htm#11">問題へ</A>
<HR WIDTH=100%>
<a NAME="12">
<b>
設問2</b></a><b>　</b>
<p>＜解答＞　キ　　　</p>
<p>＜解説＞ 条件を満たす部屋が見つかるごとに、その部屋の階級rank(n)から一人あたりの部屋料金を求め、一人あたりの部屋料金×利用人数→人数分の宿泊料金により計算する。n番目の部屋番号no(n)の部屋が条件に該当するOrm件目の部屋である場合、その部屋の階級はrank(n)であり、一人あたりの部屋料金はrct(rank(n))である。<br> 
したがって利用人数Iusrnのとき、人数分の宿泊料金はrct(rank(n))×Iusrnで、この宿泊料金はOrm件目の該当データとしてOrmp(Orm)に格納される。<br> 
すなわちrct(rank(n))×Iusrn → Ormp(Orm)が正解。<br>  
<img border="0" src="image/A12s01f2.gif" width="599" height="261"><br> 
<br> 
<br> 
</p> 
 
 
<HR WIDTH=100%> 
 
<a HREF="12s_p_e1.htm#12">問題へ</a> 
<HR WIDTH=100%> 
<a NAME="13"> 
<b> 
設問3</b></a><b>　</b>
<p>＜解答＞　カ</p>
<p>＜解説＞ 検索結果の出力件数はOrmによりカウントされる。検索結果を配列に格納する直前にカウントアップされ、Orm件目の該当データとして部屋番号Ormno(Orm)に格納されて出力される。</p> 
<table border="0" cellpadding="3" cellspacing="0"> 
  <tr> 
    <td valign="top">①</td> 
    <td>該当データが出力件数の最大値Rcmaxnよりも多く存在する場合、この直後の　　終了判定で出力件数の最大値Rcmaxnに到達していれば終了する必要がある。し　たがってOrm≧Rcmaxnとなれば終了するという条件を追加する。</td>
  </tr>
  <tr>
    <td valign="top">②</td>
    <td>該当データがRcmaxn個存在しない場合、もうひとつの終了条件n＞maxnで終了する必要がある。したがっていずれかを満たせば終了すればよく、n＞maxn又はOrm≧Rcmaxnが正解。</td>
  </tr>
</table>
<p>　</p>


<HR WIDTH=100%>

<a HREF="12s_p_e1.htm#13">問題へ</a>
<hr>
<p>
<A HREF="index.htm">メニューへ戻る</A>
</p>
<HR WIDTH=100%>
<p>
<a NAME="20">
<b>問2</b></a><b>　</b>
</p>
<hr>
<p>
<b><a name="21">設問</a></b>
</p>
<p>＜解答＞ａ　ウ　　　ｂ　ク　　　ｃ　ウ　　　ｄ　エ
</p>
<p>＜解説＞ 空欄ａ，ｂについて<br> 
水平方向に128個の画素があり，16個ずつ画素データを配列MAPの各要素に格納します。したがって1行当たり128÷16＝8個の配列要素が必要になります。 
</p> 
<p>　ｙ＝0（1行目）の画素はMAP(0)～MAP(7)に格納<br>
　ｙ＝1（2行目）の画素はMAP(8)～MAP(15)に格納<br>
　ｙ＝2（3行目）の画素はMAP(16)～MAP(23)に格納<br>
　　　　　　　：　　　　　　　：　　　　　　：<br>
　ｙ＝127（128行目）の画素はMAP(127×8)～MAP(127×8＋7)に格納
</p>
<p>したがって座標(x，ｙ)はMAP(ｙ×8＋x÷16）に格納されます。<br>
つまりｙを左に3ビット算術シフトして8倍し，ｘを右に4ビット算術シフトして1/16倍した値をSにセットすると，Y＋Sにはｙ×8＋ｘ÷16がセットされます。これが座標(ｘ，ｙ)の含まれる配列要素MAPの番号Vになります。したがって空欄ａは“左に3ビット算術シフト”，空欄ｂは“右に4ビット算術シフト”になります。
</p>
<p>空欄ｃについて<br>
　16個ずつ画素データを配列要素に格納するので，ｘ座標がセットされているXを16で割った余りを求めると，座標(x，ｙ)が格納されている配列要素MAPにおける該当ビット位置になります。Xを16で割った余りは，Xの下位4ビットに該当します。Xの下位4ビットを取り出し10進数に変換すると，これが配列要素MAPの中での該当ビット位置になります。Xの下位4ビットを取り出すには，(0000000000001111)2つまり15とのビット単位の論理積を求めればよい。
</p>
<p>空欄ｄについて<br>
　QにはBIT(X)のビット列が代入されています。BIT(X)は，座標(x，ｙ)に対応する配列要素MAP(V)の該当ビットだけが1で，それ以外は0になっているビット列です。WにはMAP(V)のビット列が格納されているので，WとQとのビット単位の論理和をとると，ビット列Qの0に対応するビットは元のままで，1に対応するビットが1にセットされ，座標(x，ｙ）の画素を点灯できます。<br>
</p>
<HR WIDTH=100%>
<a HREF="12s_p_e1.htm#21">問題へ</a>
<HR WIDTH=100%>

<p>
<A HREF="index.htm">メニューへ戻る</A>
</p>
<HR WIDTH=100%>
<p>　</p>
  </blockquote>
</BODY>
</HTML>
